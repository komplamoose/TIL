# μ•κ³ λ¦¬μ¦ : Dynamic Programming

---

## μ™Ένμ› μν λ¬Έμ 

> λ¨λ“  λ„μ‹λ¥Ό ν•λ²μ”©λ§ λ°©λ¬Έν•μ—¬ μκΈ° μμ‹ μ λ„μ‹λ΅ λμ•„μ¤λ” λ°, λ„μ‹λ΅ κ°€λ” Edgeμ—” Weightκ°€ λ¶€μ—¬λμ–΄ μλ‹¤.

μ΄ λ•, μκΈ° μμ‹ μΌλ΅ λμ•„μ¤λ” κ²½μ° μ¤‘, ν†µκ³Όν•λ” μ—£μ§€ κ°€μ¤‘μΉμ ν•©μ΄ μµμ†κ°€ λλ” κ²½μ°λ¥Ό κµ¬ν•λΌ.
> 

<br><br>

### λ¬Έμ  μ„¤λ…

- `Weighted`, `Directed Graph` κΈ°μ¤€μ΄λ‹¤.
- μµμ†ν• ν•λ‚μ `ν•΄λ°€ν„΄ νλ΅`κ°€ μ΅΄μ¬ν•λ‹¤κ³  ν–μ„ λ•, μ΄ νλ΅λ“¤ μ¤‘ `μµμ† κ°’`μ„ κ°€μ§€λ” νλ΅λ£° κµ¬ν•λΌ.
- νλ΅μ κ²½μ° `μ–΄λ””μ„ μ¶λ°`ν•λ”μ§€λ” `μƒκ΄€μ΄ μ—†λ‹¤`λ” κ²ƒμ„ μ°λ¦¬λ” ν•΄λ°€ν„΄ νλ΅λ¥Ό κ³µλ¶€ν•λ©΄μ„ λ°°μ› λ‹¤.
- `λΈλ£¨νΈν¬μ¤`ν•κ² μ ‘κ·Όν•κΈ°
    - λ¨λ“  `ν•΄λ°€ν„΄ νλ΅` λ‹¤ κµ¬ν•΄λ²„λ¦° λ‹¤μ. μ—¬κΈ°μ„ `κ°€μ¤‘μΉ κ°€μ¥ λ‚®μ€ νλ΅`λ¥Ό κµ¬ν•μ.
        - `(n-1)!`
<br><br>

### μ ‘κ·Όλ²• : DP

- `λΉ„νΈλ§μ¤ν‚Ή`μ„ ν†µν•΄ λ„μ‹μ λ°©λ¬Έμ—¬λ¶€ λ¶€λ¶„μ§‘ν•©μ„ ν¨κ³Όμ μΌλ΅ ν‘ν„ν•  μ μλ‹¤.
- λ„μ‹λ“¤μ„ `μ§‘ν•©`μΌλ΅ ν‘ν„ν•μ€μ„ λ•, λ„μ‹κ°€ `4κ°`κ°€ μλ‹¤λ©΄ κ·Έ λ¶€λ¶„μ§‘ν•©μ€
    - `λ°©λ¬Έν•λ” κ²½μ°` - `μ• λ°©λ¬Έν•λ” κ²½μ°` (0-1)λ΅
        - `4bit`λ΅ ν‘ν„ν•  μ μμ„ κ²ƒμ΄λ‹¤.
- κ·Έλ ‡κΈ° λ•λ¬Έμ—, `nκ°μ μ›μ†(λ„μ‹)`μ λ°©λ¬Έ μ—¬λ¶€ λ¶€λ¶„μ§‘ν•©μ„ κµ¬ν•κΈ° μ„ν•΄μ„  `n-digit`κ°€ ν•„μ”ν•¨μ„ μ°λ¦¬λ” μƒκ°ν•΄λ‚Ό μ μλ‹¤.
- μ΄λ•, λ„μ‹κ°€ λ§μ•½ `3κ°`κ°€ μ΅΄μ¬ν•λ‹¤λ©΄
    - λ¨λ“  λ„μ‹λ¥Ό λ°©λ¬Έν•λ” κ²½μ°λ” `111`λ΅ ν‘ν„ κ°€λ¥ν•κ³ , μ΄κ±Έ μ΄μ§„μλ΅ λ³€ν™ν•λ©΄ β‡’ `7 (2^3 -1)`
    - ν•λ‚λ„ λ°©λ¬Έ μ•ν•λ” κ²½μ°λ” `000`, β‡’ `0 (2^0 -1)`
- κ° λΉ„νΈλ§λ‹¤ ν‘ν„ν•λ” μ«μκ°€ λ‹¤λ¥΄κΈ° λ•λ¬Έμ—, μ°λ¦¬λ” `10μ§„μ`λ¥Ό `nμ§„μ` λ³€ν™ν•λ” κ³Όμ •μΌλ΅ ν„μ¬ λ¶€λ¶„μ§‘ν•©μ ν•νƒλ¥Ό μ• μ μκ² λλ‹¤.
- μ¶λ° λ…Έλ“ `V1`μ€ κ³ λ ¤ μ•ν•΄λ„ λλ‹¤. μ°λ¦¬λ” μ¤λ΅μ§€ `V2`μ—μ„ `Vn`κΉμ§€μ λ„μ‹λ“¤μ λ¶€λ¶„μ§‘ν•©λ§μ„ κ³ λ ¤ν•λ©΄ λλ‹¤.
<br><br>

### DP κµ¬μ΅° λ§λ“¤κΈ°

- DP κ³„μ‚°μ„ ν•κΈ°μ„ν•΄ **λ©”λ¨μ΄μ μ΄μ… λ°°μ—΄** `D`λ¥Ό μƒμ„±ν•λ‹¤.
- μ΄λ• `D`λ”
    - `D[vi][a]`
        - `λ²„ν…μ¤ vi`μ—μ„, `A μ§‘ν•©`μ— μλ” λ²„ν…μ¤λ“¤μ„ ν•λ²λ§ κ±°μ³μ„ λ‹¤μ‹ `1λ² λ²„ν…μ¤`λ΅ λμ•„κ°€λ” λ° κ±Έλ¦¬λ” **μµμ† λΉ„μ©**
    - `D[vi][0]`
        - `λ²„ν…μ¤ vi`μ—μ„ **μ¤‘κ°„μ— μ•„λ¬΄ λ²„ν…μ¤λ„ κ±°μΉμ§€ μ•κ³ ** `1λ² λ²„ν…μ¤`λ΅ κ°€λ” λΉ„μ©
        - μ¦‰, `Vi`μ—μ„ `V1`λ΅ κ°€λ” λΉ„μ©
- λν• `D[vi][A]`λ”
    - `D[vi][a]= minimum(W[i][j]+D[vi][A-{vj}])`
        - μ΄ λ•, `j`λ” μ§‘ν•© `A`μ— μ΅΄μ¬ν•λ” μ›μ†μ—¬μ•Ό ν•λ©°, μ§‘ν•© `A`μ λ¨λ“  μ›μ†λ¥Ό μνν•¨
        - `λ²„ν…μ¤ i`μ—μ„ `A` μ•μ— μ΅΄μ¬ν•λ” λ²„ν…μ¤ μ¤‘ ν•λ‚μΈ `j`λ΅ κ°€λ” λΉ„μ© + `λ²„ν…μ¤ i`μ—μ„ `A`μ—μ„ `j λ²„ν…μ¤` **μ—†μ—μ„ λ•**μ μµμ†λΉ„μ©
            - μ—¬κΈ°μ„ **κ°€μ¥ λ‚®μ€ κ°’**μ΄ λλ‹¤.
- μ΄ λ•, μ§‘ν•© `A`μ—μ„ **μ΄ λ²„ν…μ¤κ°€ μλ”μ§€**, νΉμ€ μ΄ λ²„ν…μ¤λ¥Ό **μ μ™Έν•λ” μ§€**, ν„μ¬ **λ‡ κ°μ λ²„ν…μ¤λ¥Ό λ°©λ¬Έν•μ€λ”μ§€**λ” λΉ„νΈμ‹ν”„νΈλ¥Ό ν†µν•΄ ν™•μΈ-κµ¬ν„ν•  μ μλ‹¤.

<br><br>

### κµ¬ν„

- ν•„μ” ν•¨μ 1 : `Count` ν•¨μ
    - μ§‘ν•© `A`λ¥Ό μ¤λ¥Έμ½μΌλ΅ λΉ„νΈμ‹ν”„νΈν•λ©΄μ„, `1`κ³Ό `and` κ΄€κ³„μΈ λ…€μ„μ΄ λ‡ κ°λ‚ μλ”μ§€ μ²΄ν¬ν•λ‹¤.
    - μ§‘ν•© Aμ—μ„, `λ°©λ¬Έν• λ²„ν…μ¤`κ°€ μ΄ λ‡ κ°μΈμ§€ μ²΄ν¬ν•λ” ν•¨μλ‹¤.
- ν•„μ” ν•¨μ 2 : `isIn` ν•¨μ
    - `1`μ„ `i-2` λ§νΌ λ ν”„νΈ μ‹ν”„νΈ μ‹ν‚¨ μΈλ±μ¤μ™€ `and` κ΄€κ³„μΈ κ²½μ°, ν„μ¬ λ¶€λ¶„μ§‘ν•©μ΄ `iλ²μ§Έ λ„μ‹λ¥Ό λ°©λ¬Έν–λ‹¤`λ” λ»μ΄λ‹¤.
- ν•„μ” ν•¨μ 3 : diff ν•¨μ
    - `1`μ„ `i-2` λ§νΌ λ ν”„νΈ μ‹ν‚¨ μΈλ±μ¤λ¥Ό `false`λ΅ λ°”κΎΌ λ¶€λ¶„μ§‘ν•©μ„ λ¦¬ν„΄ν•λ” ν•¨μλ‹¤.
    - λ¶€λ¶„μ§‘ν•©μ—μ„ `νΉμ • λ²„ν…μ¤ i`λ¥Ό **μ μ™Έν• λ¶€λ¶„μ§‘ν•©**μ„ μ°Ύκ³  μ‹¶μ„ λ• μ‚¬μ©ν•λ‹¤.

<br><br>

### μ „μ²΄ μ½”λ“

> π¤¨ λ§¤μ° μ–΄λ µκΈ° λ•λ¬Έμ— μ£Όμ„ λ§μ΄ λ‹¬μ•„λ†¨λ‹¤.
> 

```cpp
#include <iostream>
#include <vector>
#include <cmath>
#define INF 10000001

using namespace std;

int W[100][100]; // κ·Έλν”„ ν–‰λ ¬
int D[100][100]; // DP ν–‰λ ¬
int P[100][100]; // κ²½λ΅ μ°ΎκΈ°μ© λ°°μ—΄

int v, e; // μ΄ λ²„ν…μ¤, μ—£μ§€ κ°―μ

bool isIn(int i, int A) {
    return (A & (1 << (i - 2))) != 0; // i-2λ§νΌ μ‹ν”„νΈμ‹μΌμ„ μλ”μ§€ μ²΄ν¬ (Aμ§‘ν•©μ—” 2λ²μ§Έ λ²„ν…μ¤λ¶€ν„° μ²΄ν¬λλ―€λ΅, 0λ²μ§Έ μΉΈμ— 1μ΄λ©΄ 2λ²μ§Έ λ²„ν…μ¤μ— λ°©λ¬Έν–λ‹¤λ” λ»)
} // μ£Όμ ! : μμΌλ©΄ true λ¦¬ν„΄ν•¨.

int diff(int A, int j) {
    return (A & ~(1 << (j - 2))); // Aμ—μ„ jλ²μ¨° λ²„ν…μ¤ μ§€μ›λ²„λ¦° λ¶€λ¶„μ§‘ν•©μ„ λ¦¬ν„΄ν•΄μ¤. 
    //jλ” μµμ† 2μ΄κ³ , λ¶€λ¶„μ§‘ν•©μ€ μ¶λ°μ„ κ³ λ ¤ν•μ§€ μ•μ€ 2λ²μ§Έ λ²„ν…μ¤λ¶€ν„° μ²΄ν¬ν•κΈ°λ΅ ν•μ€μΌλ―€λ΅, jκ°€ 2μΌ κ²½μ° j-2=0, μ²«λ²μ§Έ λΉ„νΈλ¥Ό μ²΄ν¬ν•λ” κ²ƒμ΄ λ§μ
}

int count(int A) {
    int cnt = 0;
    for (; A != 0; A >>= 1) // 1μ΄ λ‡κ° μλ”μ§€ (μ΄ λ‡κ°μ λ²„ν…μ¤λ¥Ό λ°©λ¬Έν–λ”μ§€ μ²΄ν¬)
        if (A & 1) cnt++;
    return cnt;
}

int minimum(int n, int i, int& minJ, int A, int W[][100], int D[][100])
{
    int minV = INF, value;
    for (int j=2; j<=n ;j++) { // λ¨λ“  λ²„ν…μ¤ μνν•μ§€λ§, λ²„ν…μ¤ jλ” A λ¶€λ¶„μ§‘ν•©μ— μ΅΄μ¬ν•΄μ•Ό ν•λ‹¤.
        if (!isIn(j, A)) continue; // jλ²μ§Έ λ²„ν…μ¤κ°€ Aμ— μ—†λ‹¤λ©΄ νƒλ½. μ°λ¦¬λ” μ§‘ν•© Aμ— μ΅΄μ¬ν•λ” jλ²μ§Έ λ²„ν…μ¤μ κ²½μ°λ§ νƒμƒ‰ν•λ‹¤.
        value = W[i][j] + D[j][diff(A,j)]; // iλ²μ§Έ λ²„ν…μ¤μ—μ„ jλ²μ§Έ λ²„ν…μ¤λ΅ μ§ν†µμΌλ΅ μ΄λ™ν• κ°’ + jλ²μ§Έ λ²„ν…μ¤μ—μ„ μ‹μ‘ν•μ—¬ Aμ—μ„ jλΊ€ λ¶€λ¶„μ§‘ν•©μ—μ„ μ²«λ²μ§Έλ΅ λμ•„κ°€λ” μµμ† λΉ„μ©μ μµμ†λ¥Ό κµ¬ν•μ.
        if (minV > value){ 
            minV=value;
            minJ = j; // μ΄λ• κµ¬ν•΄λ‚Έ λ²„ν…μ¤ iμ—μ„ μ΄λ™ν•μ€μ„ λ•μ μµμ†λΉ„μ©μ„ λ§λ“¤ μ μλ” λ²„ν…μ¤ jμ λ²νΈλ¥Ό μ €μ¥ν•λ‹¤.
        }
    }

    return minV; // μµμ†λΉ„μ© λ¦¬ν„΄
}

void tour(int v, int A, int P[][100]) {
    int k= P[v][A]; // vλ²μ§Έ λ²„νƒμ¤μ—μ„ A λ¶€λ¶„μ§‘ν•©μ— μλ” λ„μ‹λ“¤μ„ ν†µκ³Όν•μ—¬ λ‹¤μ‹ μ²«λ²μ§Έλ΅ λμ•„μ¤λ” μµλ‹¨ κ²½λ΅μ—μ„, λ‹¤μμΌλ΅ κ°€μ•Όν•  λ²„ν…μ¤ λ„λ²„

    if (A==0){ // λ” μ΄μƒ μ‚¬μ΄μ— μ§€λ‚κ° λ²„ν…μ¤κ°€ μ—†λ” κ²½μ° => μκΈ° μμ‹ μΌλ΅ λμ•„μ΄ 1λ²! 
        cout << "1";
    }
    else {
        cout << k << " "; // vλ²μ—μ„ μ΄μ  kλ² λ²„ν…μ¤λ΅ μ΄λ™ν•΄μ•Ό ν•λ‹¤.
        tour(k, diff(A,k), P); //μ΄μ  kλ² λ²„ν…μ¤μ—μ„ μ¶λ°ν•μ—¬, κΈ°μ΅΄ λ¶€λ¶„μ§‘ν•© Aμ—μ„ Kλ¥Ό μ μ™Έν• λ²„ν…μ¤λ“¤μ„ ν†µκ³Όν•μ—¬ μ¶λ°λ΅ λμ•„κ°€κΈ° μ„ν•΄ Kκ°€ κ°€μ•Όν•λ” λ‹¤μ λ²„ν…μ¤λ¥Ό λ μ¶”μ ν•λ‹¤.  
    }
}

void travel(int n, int W[][100], int D[][100], int P[][100], int& minlength)
{
    int i, j, k, A;

    int subset_size = pow(2, n-1); // λ¶€λ¶„μ§‘ν•©μ μµλ€ κ°―μ => 2^(n-1), n-1μΈ μ΄μ  : μ²« λ²μ§Έ μ¶λ° λ²„ν…μ¤λ” μƒκ°ν•μ§€ μ•κΈ°λ΅ ν–μΌλ‹κΉ
    for (i=2; i<=n; i++) // iλ²μ§Έ λ²„ν…μ¤μ—μ„ μ²«λ²μ§Έ λ²„ν…μ¤λ΅ λμ•„κ°€λ” λΉ„μ© μ΄κΈ°ν™”
        D[i][0] = W[i][1];
    for (int k=1; k<=n-2; k++) { // μ¤‘κ°„μ— λ²„ν…μ¤ 1κ°λ§ κ³¨λΌμ„ μ²«λ²μ§Έλ΅ λμ•„κ°€λ” κ²½μ°μ—μ„λ¶€ν„°, n-2κ°μ λ²„ν…μ¤λ¥Ό λ°©λ¬Έν•μ€μ„λ• μ²«λ²μ§Έλ΅ λμ•„κ°€λ” κ²½μ°κΉμ§€ μν. n-1κ°μ λ²„ν…μ¤ λ‹¤ λ°©λ¬Έν•΄μ„ μ°Ύλ” κ²½μ°λ” κ³§ μΆ…κ²°μ΄λΌλ” λ»μ΄λ―€λ΅, λ§μ§€λ§‰μ— κµ¬ν• κ±°μ„
        for (A=0; A<subset_size; A++) { // λ¨λ“  λ„μ‹λ¶€ν„° λ‚μ¬ μ μλ” λ¨λ“  κ²½μ°μ μ νƒμƒ‰
            if (count(A) != k) continue; // λ§μ•½ λ¶€λ¶„μ§‘ν•©μ λ„μ‹κ°€ Kκ°κ°€ μ•„λ‹λΌλ©΄, μ¤ν‚µν•λ‹¤. μ°λ¦¬λ” μ΄ kκ°μ λ„μ‹λ§ λ°©λ¬Έν•μ—¬ μ²«λ²μ§Έλ΅ λμ•„κ°€λ” μΌ€μ΄μ¤λ¥Ό μ°Ύκ³  μ‹¶λ‹¤.
            for (i=2; i<=n; i++) { // 2λ² λ²„ν…μ¤λ¶€ν„° λ§μ§€λ§‰ λ²„ν…μ¤κΉμ§€ μνν•λ©΄μ„, iλ²μ§Έ λ²„ν…μ¤μ—μ„ μ¶λ°ν•μ—¬ A λ¶€λ¶„μ§‘ν•© λ‚΄λ¶€μ— μλ” λ²„ν…μ¤λ§ λ°©λ¬Έν•μ—¬ λ‹¤μ‹ μ¶λ° λ²„ν…μ¤μΈ μ²« λ²μ§Έ λ²„ν…μ¤κΉμ§€ λμ•„μ¤λ” μµμ†λΉ„μ©μ„ κ³„μ‚°ν•κ³  μ‹¶λ‹¤.
                if (isIn(i, A)) continue; // λ§μ•½ λ¶€λ¶„μ§‘ν•©μ— iλ²μ§Έ λ²„ν…μ¤κ°€ μ΄λ―Έ μ΅΄μ¬ν•λ‹¤λ©΄ => μ¤‘λ³µ λ°©λ¬Έμ΄λΌλ” λ»μ΄λ―€λ΅ νƒλ½
                D[i][A]= minimum(n, i, j, A, W, D); // λ²„ν…μ¤μ μ΄ κ°―μ, μ¶λ°ν•λ ¤λ” iλ²μ§Έ λ²„ν…μ¤, iλ²μ§Έ λ²„ν…μ¤μ—μ„ λ‹¤μμΌλ΅ λ„μ–΄κ°€λ” λ²„ν…μ¤λ¥Ό μ°ΎκΈ°μ„ν• j, λ¶€λ¶„μ§‘ν•© A
                P[i][A]= j; // λ²„ν…μ¤ iμ—μ„, A λ¶€λ¶„μ§‘ν•©λ§μ„ ν†µκ³Όν•μ—¬ μ¶λ° λ²„ν…μ¤λ΅ λμ•„μ¤λ ¤λ” κ³Όμ •μ—μ„, iλ²μ§Έ λ²„ν…μ¤λ” jλ² λ²„ν…μ¤λ΅ μ΄λ™ν•λ‹¤.
            }
        }
    }
    A=subset_size -1; // λ¨λ“  λ²„ν…μ¤λ¥Ό λ°©λ¬Έν•μ€μ„ λ•μ κ²½μ°λ” 2^n -1μ΄ λλ‹¤. (λ¨λ“  λ²„ν…μ¤κ°€ 11111111 ν•νƒμΈ κ²½μ°)
    D[1][A] = minimum(n, 1, j, A, W, D); // μ²«λ²μ§Έ λ²„ν…μ¤μ—μ„ μ¶λ°ν•μ€μ„ λ•, λ¨λ“  λ²„ν…μ¤λ¥Ό ν†µκ³Όν•μ—¬ λ‹¤μ‹ μ²«λ²μ§Έλ΅ λμ•„μ¤λ” κ²½μ°μ μµλ‹¨κ±°λ¦¬ κµ¬ν•κΈ°
    P[1][A] = j; // μ²«λ²μ§Έ λ²„ν…μ¤λ” κ·Έ λ‹¤μμΌλ΅ jλ² λ²„ν…μ¤λ΅ μ΄λ™ν•λ‹¤. 
    minlength = D[1][A]; // μµλ‹¨κ±°λ¦¬ μ €μ¥
}

int main()
{
    int minlength;
    cin >> v >> e; // λ²„ν…μ¤-μ—£μ§€ κ°―μ μ…λ ¥λ°›μ

    for (int i=0; i<e; i++) { // κ·Έλν”„ μƒμ„±, Directed κ·Έλν”„μ„
        int x, y, w;
        cin >> x >> y >> w;
        W[x][y]=w;
    }

    for (int i=1; i<=v; i++) { // κ° μ μλ” λ²„ν…μ¤κ°€ μ—†λ” κ²½μ° INF, μκΈ° μμ‹ μ κ²½μ° 0μΌλ΅ μ΄κΈ°ν™”
        for (int j=1; j<=v; j++) {
            if (i==j) continue;
            if (W[i][j]==0) W[i][j]=INF;
        }
    }

    travel(v, W, D, P, minlength); // μ΄ λ²„ν…μ¤μ κ°―μ, κ·Έλν”„, DP λ°°μ—΄, κ²½λ΅ νƒμƒ‰μ„ μ„ν• Pλ°°μ—΄, μµμ†κΈΈμ΄ κ°’μ„ μ €μ¥ν•  minlengthλ¥Ό νλΌλ―Έν„°λ΅ λ„κ²¨μ¤

    cout << minlength << endl << "1 ";
    tour(1, pow(2, v-1)-1, P); // 1λ² λ²„ν…μ¤μ—μ„, 1λ² λ²„ν…μ¤λ¥Ό μ μ™Έν• λ²„ν…μ¤λ“¤μ„ ν†µκ³Όν•λ ¤λ” λ°, λ‹¤μ λ²„ν…μ¤λ΅ μ–΄λ””λ¥Ό κ°€μ•Όν•  μ§€ μ°Ύμ.
    cout << endl;

    for (int i=1; i<=v; i++) {
        for (int j=0; j<pow(2, v-1); j++) {
            if (D[i][j]==INF||D[i][j]==0) continue; 
            cout << i << " " << j << " " <<  D[i][j] << endl;
        }
    }
}
```

---
